<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- load style from css.css -->
    <link rel="stylesheet" href="css.css">
    <!-- load codex style -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codex/2.3.2/codex.min.js"
        integrity="sha512-5hdqakHInVQsHvGk+D4cLQza/uTpBPj+lqlFG37aEm6d3/z0Sd8K8nXAun7zrgisxfEwGdS2OX764It8P4n5jQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codex/2.3.2/codex.style.min.css"
        integrity="sha512-29UfiqUEWV5YjfmDDgRVrkBv19xQ+1wlgLlZfrcE5z2VfV1EXnyRqv3hpQB08V0dKRaQ1drnVpRcFx45m6oORA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>

    <div id="category-batch-manager" class="cbm-container">

        <div class="cbm-header">
            <h2>Category Batch Manager</h2>
            <button
                class="cdx-button cdx-button--action-default cdx-button--weight-quiet cdx-button--size-medium cdx-button--icon-only cbm-close"
                id="cbm-close" aria-label="Close">&#215;</button>
        </div>

        <div class="cbm-body">
            <div class="cbm-search">
                <div class="cdx-field">
                    <div class="cdx-label">
                        <label class="cdx-label__label" for="cbm-source-category">
                            <span class="cdx-label__label__text">Source Category</span>
                        </label>
                    </div>
                    <div class="cdx-field__control">
                        <div class="cdx-text-input">
                            <input id="cbm-source-category" class="cdx-text-input__input" type="text"
                                value="${this.state.sourceCategory}" placeholder="Category:Example">
                        </div>
                    </div>
                </div>

                <div class="cdx-field">
                    <div class="cdx-label">
                        <label class="cdx-label__label" for="cbm-pattern">
                            <span class="cdx-label__label__text">Search Pattern</span>
                        </label>
                        <span class="cdx-label__description">
                            Enter a pattern to filter files (e.g., ,BLR.svg)
                        </span>
                    </div>
                    <div class="cdx-field__control cbm-search-row">
                        <div class="cdx-text-input" style="flex: 1;">
                            <input id="cbm-pattern" class="cdx-text-input__input" type="text"
                                placeholder="e.g., ,BLR.svg">
                        </div>
                        <button id="cbm-search-btn"
                            class="cdx-button cdx-button--action-progressive cdx-button--weight-primary cdx-button--size-medium">
                            Search
                        </button>
                    </div>
                </div>
            </div>
            <div class="cbm-results">
                <div id="cbm-results-header" class="cbm-results-header hidden">
                    <div class="cdx-info-chip cdx-info-chip--notice">
                        <span class="cdx-info-chip__text">
                            Found <strong id="cbm-count">0</strong> files
                        </span>
                    </div>
                    <button id="cbm-select-all"
                        class="cdx-button cdx-button--action-default cdx-button--weight-quiet cdx-button--size-medium">
                        Select All
                    </button>
                    <button id="cbm-deselect-all"
                        class="cdx-button cdx-button--action-default cdx-button--weight-quiet cdx-button--size-medium">
                        Deselect All
                    </button>
                </div>
                <div id="cbm-results-message">
                    <div class="cdx-message cdx-message--block cdx-message--error" role="alert">
                        <span class="cdx-message__icon"></span>
                        <div class="cdx-message__content">${text}</div>
                    </div>
                    <div class="cdx-message cdx-message--block cdx-message--info" aria-live="polite">
                        <span class="cdx-message__icon"></span>
                        <div class="cdx-message__content">${text}</div>
                    </div>
                </div>
                <br>
                <div id="cbm-file-list">
                    <div class="cdx-progress-bar cdx-progress-bar--inline" role="progressbar" aria-label="Loading">
                        <div class="cdx-progress-bar__bar"></div>
                    </div>
                </div>
                <br>
                <div id="cbm-file-list">
                    <div class="cdx-checkbox cbm-file-checkbox-wrapper">
                        <div class="cdx-checkbox__wrapper">
                            <input id="file-${index}" class="cdx-checkbox__input cbm-file-checkbox" type="checkbox"
                                checked>
                            <span class="cdx-checkbox__icon"></span>
                            <div class="cdx-checkbox__label cdx-label">
                                <label for="file-${index}" class="cdx-label__label">
                                    <span class="cdx-label__label__text">${file.title}</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <button
                        class="cdx-button cdx-button--action-destructive cdx-button--weight-quiet cdx-button--size-medium cdx-button--icon-only cbm-remove-btn"
                        data-index="${index}" aria-label="Remove file">&#215;</button>
                </div>
            </div>

            <div class="cbm-actions">
                <div class="cdx-field">
                    <div class="cdx-label">
                        <label class="cdx-label__label" for="cbm-add-cats">
                            <span class="cdx-label__label__text">Add Categories (comma-separated)</span>
                        </label>
                        <span class="cdx-label__description">
                            e.g., Category:Belarus, Category:Europe
                        </span>
                    </div>
                    <div class="cdx-field__control">
                        <div class="cdx-text-input">
                            <input id="cbm-add-cats" class="cdx-text-input__input" type="text"
                                placeholder="Category:Example">
                        </div>
                    </div>
                </div>

                <div class="cdx-field">
                    <div class="cdx-label">
                        <label class="cdx-label__label" for="cbm-remove-cats">
                            <span class="cdx-label__label__text">Remove Categories (comma-separated)</span>
                        </label>
                    </div>
                    <div class="cdx-field__control">
                        <div class="cdx-text-input">
                            <input id="cbm-remove-cats" class="cdx-text-input__input" type="text"
                                placeholder="Category:Old">
                        </div>
                    </div>
                </div>

                <div class="cdx-field">
                    <div class="cdx-label">
                        <label class="cdx-label__label" for="cbm-summary">
                            <span class="cdx-label__label__text">Edit Summary</span>
                        </label>
                    </div>
                    <div class="cdx-field__control">
                        <div class="cdx-text-input">
                            <input id="cbm-summary" class="cdx-text-input__input" type="text"
                                value="Batch category update via Category Batch Manager">
                        </div>
                    </div>
                </div>

                <div class="cbm-selected-count">
                    Selected: <strong id="cbm-selected">0</strong> files
                </div>

                <div class="cbm-buttons">
                    <button id="cbm-preview"
                        class="cdx-button cdx-button--action-default cdx-button--weight-normal cdx-button--size-medium">
                        Preview Changes
                    </button>
                    <button id="cbm-execute"
                        class="cdx-button cdx-button--action-progressive cdx-button--weight-primary cdx-button--size-medium">
                        GO
                    </button>
                </div>
            </div>

            <div id="cbm-progress" class="cbm-progress hidden">
                <div class="cdx-progress-bar cdx-progress-bar--block" role="progressbar"
                    aria-label="Batch processing progress">
                    <div id="cbm-progress-fill" class="cdx-progress-bar__bar cbm-progress-fill"></div>
                </div>
                <div id="cbm-progress-text" class="cbm-progress-text">Processing...</div>
            </div>
        </div>

        <div id="cbm-preview-modal" class="cbm-modal hidden">
            <div class="cbm-modal-content">
                <h3>Preview Changes</h3>
                <div id="cbm-preview-content"></div>
                <button id="cbm-preview-close"
                    class="cdx-button cdx-button--action-default cdx-button--weight-normal cdx-button--size-medium">
                    Close
                </button>
            </div>
        </div>
    </div>
</body>

</html>
